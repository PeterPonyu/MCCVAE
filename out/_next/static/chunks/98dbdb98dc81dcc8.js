(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";e.s(["default",()=>eh],52683);var t=e.i(43476),a=e.i(71645),r=e.i(75254);let s=(0,r.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var n=e.i(21218);let i=(0,r.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),l=(0,r.default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),d=(0,r.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),o=(0,r.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),c=(0,r.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),u=(0,r.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),m=(0,r.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),h=(0,r.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var g=e.i(94351);let p=(0,r.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),x=e=>{let t,a=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,n={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(a.add(e),()=>a.delete(e))},i=t=e(r,s,n);return n},b=e=>e,y=e=>{let t=(e=>e?x(e):x)(e),r=e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,r=a.default.useSyncExternalStore(e.subscribe,a.default.useCallback(()=>t(e.getState()),[e,t]),a.default.useCallback(()=>t(e.getInitialState()),[e,t]));return a.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r};var f=e.i(47167),v=e.i(99749);let w="http://localhost".replace(/\/+$/,"");class j{set config(e){this.configuration=e}get basePath(){return null!=this.configuration.basePath?this.configuration.basePath:w}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||function e(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).map(r=>(function t(a,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=s+(s.length?"[".concat(a,"]"):a);if(r instanceof Array){let e=r.map(e=>encodeURIComponent(String(e))).join("&".concat(encodeURIComponent(n),"="));return"".concat(encodeURIComponent(n),"=").concat(e)}return r instanceof Set?t(a,Array.from(r),s):r instanceof Date?"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r.toISOString())):r instanceof Object?e(r,n):"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(String(r)))})(r,t[r],a)).filter(e=>e.length>0).join("&")}}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){let e=this.configuration.apiKey;if(e)return"function"==typeof e?e:()=>e}get accessToken(){let e=this.configuration.accessToken;if(e)return"function"==typeof e?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}constructor(e={}){(0,v._)(this,"configuration",void 0),this.configuration=e}}let N=new j;class S{withMiddleware(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let r=this.clone();return r.middleware=r.middleware.concat(...t),r}withPreMiddleware(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let r=t.map(e=>({pre:e}));return this.withMiddleware(...r)}withPostMiddleware(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let r=t.map(e=>({post:e}));return this.withMiddleware(...r)}isJsonMime(e){return!!e&&S.jsonRegex.test(e)}async request(e,t){let{url:a,init:r}=await this.createFetchParams(e,t),s=await this.fetchApi(a,r);if(s&&s.status>=200&&s.status<300)return s;throw new k(s,"Response returned an error code")}async createFetchParams(e,t){var a;let r,s=this.configuration.basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(s+="?"+this.configuration.queryParamsStringify(e.query));let n=Object.assign({},this.configuration.headers,e.headers);Object.keys(n).forEach(e=>void 0===n[e]?delete n[e]:{}),_(e.body)&&delete n["Content-Type"];let i={method:e.method,headers:n,body:e.body,credentials:this.configuration.credentials},l={...i,...await ("function"==typeof t?t:async()=>t)({init:i,context:e})};return r=_(l.body)||l.body instanceof URLSearchParams||(a=l.body,"undefined"!=typeof Blob&&a instanceof Blob)?l.body:this.isJsonMime(n["Content-Type"])?JSON.stringify(l.body):l.body,{url:s,init:{...l,body:r}}}clone(){let e=new this.constructor(this.configuration);return e.middleware=this.middleware.slice(),e}constructor(e=N){(0,v._)(this,"configuration",void 0),(0,v._)(this,"middleware",void 0),(0,v._)(this,"fetchApi",void 0),this.configuration=e,this.fetchApi=async(e,t)=>{let a,r={url:e,init:t};for(let e of this.middleware)e.pre&&(r=await e.pre({fetch:this.fetchApi,...r})||r);try{a=await (this.configuration.fetchApi||fetch)(r.url,r.init)}catch(e){for(let t of this.middleware)t.onError&&(a=await t.onError({fetch:this.fetchApi,url:r.url,init:r.init,error:e,response:a?a.clone():void 0})||a);if(void 0===a)if(e instanceof Error)throw new T(e,"The request failed and the interceptors did not return an alternative response");else throw e}for(let e of this.middleware)e.post&&(a=await e.post({fetch:this.fetchApi,url:r.url,init:r.init,response:a.clone()})||a);return a},this.middleware=e.middleware}}function _(e){return"undefined"!=typeof FormData&&e instanceof FormData}(0,v._)(S,"jsonRegex",RegExp("^(:?application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(:?;.*)?$","i"));class k extends Error{constructor(e,t){super(t),(0,v._)(this,"response",void 0),(0,v._)(this,"name",void 0),this.response=e,this.name="ResponseError"}}class T extends Error{constructor(e,t){super(t),(0,v._)(this,"cause",void 0),(0,v._)(this,"name",void 0),this.cause=e,this.name="FetchError"}}class E extends Error{constructor(e,t){super(t),(0,v._)(this,"field",void 0),(0,v._)(this,"name",void 0),this.field=e,this.name="RequiredError"}}class C{async value(){return this.transformer(await this.raw.json())}constructor(e,t=e=>e){(0,v._)(this,"raw",void 0),(0,v._)(this,"transformer",void 0),this.raw=e,this.transformer=t}}class D{async value(){return await this.raw.text()}constructor(e){(0,v._)(this,"raw",void 0),this.raw=e}}function R(e,t){return null==e?e:{nObs:e.n_obs,nVars:e.n_vars}}function P(e){var t;return null==(t=e)?t:{name:t.name,dtype:t.dtype,shape:R(t.shape,!1),sparsityRatio:null==t.sparsity_ratio?void 0:t.sparsity_ratio,minVal:null==t.min_val?void 0:t.min_val,maxVal:null==t.max_val?void 0:t.max_val,meanVal:null==t.mean_val?void 0:t.mean_val}}function A(e){return e}function M(e){var t;return null==(t=e)?t:{name:t.name,dtype:t.dtype,nUnique:t.n_unique,missingCount:t.missing_count,sampleValues:null==t.sample_values?void 0:t.sample_values.map(A),isTruncated:null==t.is_truncated?void 0:t.is_truncated}}function q(e,t){var a;if(null==e)return e;return{shape:R(e.shape,!1),xInfo:P(e.X_info),layers:null==e.layers?void 0:function(e,t){let a={};for(let r of Object.keys(e))a[r]=t(e[r]);return a}(e.layers,P),obsColumns:null==e.obs_columns?void 0:e.obs_columns.map(M),varColumns:null==e.var_columns?void 0:e.var_columns.map(M),qcMetrics:null==e.qc_metrics?void 0:(a=e.qc_metrics,null==a?a:{nGenesByCounts:a.n_genes_by_counts,totalCounts:a.total_counts,pctCountsMt:a.pct_counts_mt,pctCountsRibo:a.pct_counts_ribo}),filename:null==e.filename?void 0:e.filename,fileSizeMb:null==e.file_size_mb?void 0:e.file_size_mb,loadedAt:null==e.loaded_at?void 0:new Date(e.loaded_at)}}function U(e,t){return null==e?e:{embeddingType:e.embedding_type,shape:R(e.shape,!1),downloadReady:null==e.download_ready?void 0:e.download_ready,csvPath:null==e.csv_path?void 0:e.csv_path,extractedAt:null==e.extracted_at?void 0:new Date(e.extracted_at)}}function F(e){var t;return null==(t=e)?t:{epoch:t.epoch,loss:t.loss,ari:t.ari,nmi:t.nmi,asw:t.asw,ch:t.ch,db:t.db,pc:t.pc}}let G=new j({basePath:f.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000",headers:{"Content-Type":"application/json"}}),I=new class extends S{async downloadEmbeddingsDownloadEmbeddingsEmbeddingTypeGetRaw(e,t){if(null==e.embeddingType)throw new E("embeddingType",'Required parameter "embeddingType" was null or undefined when calling downloadEmbeddingsDownloadEmbeddingsEmbeddingTypeGet().');let a="/download/embeddings/{embedding_type}";a=a.replace("{embedding_type}",encodeURIComponent(String(e.embeddingType)));let r=await this.request({path:a,method:"GET",headers:{},query:{}},t);return this.isJsonMime(r.headers.get("content-type"))?new C(r):new D(r)}async downloadEmbeddingsDownloadEmbeddingsEmbeddingTypeGet(e,t){let a=await this.downloadEmbeddingsDownloadEmbeddingsEmbeddingTypeGetRaw(e,t);return await a.value()}async getAppStatusStatusGetRaw(e){let t=await this.request({path:"/status",method:"GET",headers:{},query:{}},e);return this.isJsonMime(t.headers.get("content-type"))?new C(t):new D(t)}async getAppStatusStatusGet(e){let t=await this.getAppStatusStatusGetRaw(e);return await t.value()}async getDataSummaryDataSummaryGetRaw(e){return new C(await this.request({path:"/data-summary",method:"GET",headers:{},query:{}},e),e=>q(e,!1))}async getDataSummaryDataSummaryGet(e){let t=await this.getDataSummaryDataSummaryGetRaw(e);return await t.value()}async getInterpretableEmbeddingsEmbeddingsInterpretableGetRaw(e){return new C(await this.request({path:"/embeddings/interpretable",method:"GET",headers:{},query:{}},e),e=>U(e,!1))}async getInterpretableEmbeddingsEmbeddingsInterpretableGet(e){let t=await this.getInterpretableEmbeddingsEmbeddingsInterpretableGetRaw(e);return await t.value()}async getLatentEmbeddingsEmbeddingsLatentGetRaw(e){return new C(await this.request({path:"/embeddings/latent",method:"GET",headers:{},query:{}},e),e=>U(e,!1))}async getLatentEmbeddingsEmbeddingsLatentGet(e){let t=await this.getLatentEmbeddingsEmbeddingsLatentGetRaw(e);return await t.value()}async getTrainingProgressTrainingProgressGetRaw(e){return new C(await this.request({path:"/training-progress",method:"GET",headers:{},query:{}},e),e=>{var t,a;return a=0,null==(t=e)?t:{isRunning:null==t.is_running?void 0:t.is_running,currentEpoch:null==t.current_epoch?void 0:t.current_epoch,totalEpochs:null==t.total_epochs?void 0:t.total_epochs,latestMetrics:null==t.latest_metrics?void 0:F(t.latest_metrics),history:null==t.history?void 0:t.history.map(F),errorMessage:null==t.error_message?void 0:t.error_message,startedAt:null==t.started_at?void 0:new Date(t.started_at),completedAt:null==t.completed_at?void 0:new Date(t.completed_at)}})}async getTrainingProgressTrainingProgressGet(e){let t=await this.getTrainingProgressTrainingProgressGetRaw(e);return await t.value()}async rootGetRaw(e){let t=await this.request({path:"/",method:"GET",headers:{},query:{}},e);return this.isJsonMime(t.headers.get("content-type"))?new C(t):new D(t)}async rootGet(e){let t=await this.rootGetRaw(e);return await t.value()}async startTrainingStartTrainingPostRaw(e,t){if(null==e.bodyStartTrainingStartTrainingPost)throw new E("bodyStartTrainingStartTrainingPost",'Required parameter "bodyStartTrainingStartTrainingPost" was null or undefined when calling startTrainingStartTrainingPost().');let a={};return a["Content-Type"]="application/json",new C(await this.request({path:"/start-training",method:"POST",headers:a,query:{},body:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],null==e)?e:{parameters:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],null==e)?e:{layer:e.layer,percent:e.percent,recon:e.recon,irecon:e.irecon,beta:e.beta,dip:e.dip,tc:e.tc,info:e.info,vae_reg:e.vaeReg,use_moco:e.useMoco,moco_weight:e.mocoWeight,moco_T:e.mocoT,aug_prob:e.augProb,mask_prob:e.maskProb,noise_prob:e.noiseProb,hidden_dim:e.hiddenDim,latent_dim:e.latentDim,i_dim:e.iDim,lr:e.lr,loss_mode:e.lossMode,use_qm:e.useQm}}(e.parameters,!1),config:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],null==e)?e:{epochs:e.epochs,qcparams:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],null==e)?e:{species:e.species,min_genes_per_cell:e.minGenesPerCell,max_genes_per_cell:e.maxGenesPerCell,min_counts_per_cell:e.minCountsPerCell,max_counts_per_cell:e.maxCountsPerCell,max_pct_mt:e.maxPctMt,max_pct_ribo:e.maxPctRibo}}(e.qcparams,!1)}}(e.config,!1)}}(e.bodyStartTrainingStartTrainingPost,!1)},t),e=>{var t,a;return a=0,null==(t=e)?t:{success:t.success,message:t.message}})}async startTrainingStartTrainingPost(e,t){let a=await this.startTrainingStartTrainingPostRaw(e,t);return await a.value()}async stopTrainingStopTrainingPostRaw(e){let t=await this.request({path:"/stop-training",method:"POST",headers:{},query:{}},e);return this.isJsonMime(t.headers.get("content-type"))?new C(t):new D(t)}async stopTrainingStopTrainingPost(e){let t=await this.stopTrainingStopTrainingPostRaw(e);return await t.value()}async uploadDataUploadDataPostRaw(e,t){let a;if(null==e.file)throw new E("file",'Required parameter "file" was null or undefined when calling uploadDataUploadDataPost().');let r=function(e){for(let t of e)if("multipart/form-data"===t.contentType)return!0;return!1}([{contentType:"multipart/form-data"}]);return a=r?new FormData:new URLSearchParams,null!=e.file&&a.append("file",e.file),new C(await this.request({path:"/upload-data",method:"POST",headers:{},query:{},body:a},t),e=>{var t,a;return a=0,null==(t=e)?t:{success:t.success,message:t.message,dataSummary:null==t.data_summary?void 0:q(t.data_summary,!1)}})}async uploadDataUploadDataPost(e,t){let a=await this.uploadDataUploadDataPostRaw(e,t);return await a.value()}}(G),L=["upload","training","embeddings","status"],z={epochs:100,learningRate:.001,batchSize:64,latentDim:10,hiddenDim:128},O={data:null,available:!1,loading:!1},B={},H=(e,t,a)=>{V(a),B[a]=setInterval(()=>{e().catch(console.error)},t)},V=e=>{B[e]&&(clearInterval(B[e]),B[e]=null)},J=(e=>e?y(e):y)((e,t)=>({currentStep:"upload",uploadedFile:null,uploading:!1,uploadProgress:0,uploadError:null,trainingState:null,trainingConfig:{...z},isStartingTraining:!1,trainingError:null,embeddings:{latent:{...O},interpretable:{...O}},downloading:{latent:!1,interpretable:!1},embeddingsError:null,appStatus:null,isStatusLoading:!1,statusError:null,lastStatusUpdate:null,_derived:{progressPercentage:0,completedSteps:[],availableSteps:["upload","status"],isTrainingRunning:!1,isTrainingComplete:!1,hasAnyEmbeddings:!1},_updateDerivedState:()=>{let a=t(),r=(e=>{var t,a,r,s;let n=[];e.uploadedFile&&n.push("upload"),(null==(t=e.trainingState)?void 0:t.completedAt)&&n.push("training"),(e.embeddings.latent.available||e.embeddings.interpretable.available)&&n.push("embeddings"),e.appStatus&&n.push("status");let i=["upload"];return e.uploadedFile&&i.push("training"),(null==(a=e.trainingState)?void 0:a.completedAt)&&i.push("embeddings"),i.push("status"),{progressPercentage:Math.round(n.length/L.length*100),completedSteps:n,availableSteps:i,isTrainingRunning:(null==(r=e.trainingState)?void 0:r.isRunning)===!0,isTrainingComplete:(null==(s=e.trainingState)?void 0:s.completedAt)!=null,hasAnyEmbeddings:e.embeddings.latent.available||e.embeddings.interpretable.available}})(a);JSON.stringify(r)!==JSON.stringify(a._derived)&&e({_derived:r})},navigateToStep:t=>{L.includes(t)&&e({currentStep:t})},navigateToNext:()=>{let a=t(),r=L.indexOf(a.currentStep),s=L[r+1];s&&a._derived.availableSteps.includes(s)&&e({currentStep:s})},uploadFile:async a=>{e({uploading:!0,uploadError:null,uploadProgress:0});try{e({uploadProgress:25});let r=await I.uploadDataUploadDataPost({file:a});if(e({uploadProgress:75}),!r.success||!r.dataSummary)throw Error(r.message||"Upload failed: Invalid API response");let{filename:s,fileSizeMb:n}=r.dataSummary;if(!s)throw Error("Upload succeeded but filename is missing from response");e({uploading:!1,uploadProgress:100,uploadedFile:{name:s,sizeInBytes:n?Math.round(1024*n*1024):a.size},uploadError:null}),t()._updateDerivedState(),setTimeout(()=>t().navigateToStep("training"),1e3)}catch(a){throw e({uploading:!1,uploadError:a.message||"Upload failed",uploadProgress:0}),t()._updateDerivedState(),a}},resetUpload:()=>{e({uploadedFile:null,uploadError:null,uploadProgress:0}),t()._updateDerivedState()},fetchTrainingState:async()=>{try{let a=await I.getTrainingProgressTrainingProgressGet();e({trainingState:a,trainingError:null}),a&&!a.isRunning&&V("training"),t()._updateDerivedState()}catch(a){e({trainingError:a.message||"Failed to fetch training state"}),t()._updateDerivedState()}},startTraining:async()=>{e({isStartingTraining:!0,trainingError:null});try{let{trainingConfig:e}=t(),a={parameters:{epochs:e.epochs,learningRate:e.learningRate,batchSize:e.batchSize},config:{latentDim:e.latentDim,hiddenDim:e.hiddenDim}};await I.startTrainingStartTrainingPost({bodyStartTrainingStartTrainingPost:a}),H(t().fetchTrainingState,2e3,"training")}catch(a){throw e({trainingError:a.message||"Failed to start training"}),t()._updateDerivedState(),a}finally{e({isStartingTraining:!1})}},stopTraining:async()=>{V("training");try{await I.stopTrainingStopTrainingPost(),await t().fetchTrainingState()}catch(a){throw e({trainingError:a.message||"Failed to stop training"}),t()._updateDerivedState(),a}},resetTraining:()=>{V("training"),e({trainingState:null,trainingError:null}),t()._updateDerivedState()},updateTrainingConfig:t=>{e(e=>({trainingConfig:{...e.trainingConfig,...t}}))},fetchEmbedding:async a=>{let{trainingState:r}=t();if(null==r?void 0:r.completedAt){e(e=>({embeddings:{...e.embeddings,[a]:{...e.embeddings[a],loading:!0,error:void 0}}}));try{let r="latent"===a?I.getLatentEmbeddingsEmbeddingsLatentGet():I.getInterpretableEmbeddingsEmbeddingsInterpretableGet(),s=await r;e(e=>({embeddings:{...e.embeddings,[a]:{data:s,available:!0,loading:!1}}})),t()._updateDerivedState()}catch(r){throw e(e=>({embeddings:{...e.embeddings,[a]:{...O,error:r.message||"Failed to fetch ".concat(a," embeddings")}}})),t()._updateDerivedState(),r}}},fetchAllEmbeddings:async()=>{let{trainingState:a}=t();if(null==a?void 0:a.completedAt){e({embeddingsError:null});try{await Promise.allSettled([t().fetchEmbedding("latent"),t().fetchEmbedding("interpretable")])}catch(t){e({embeddingsError:t.message||"Failed to fetch embeddings"})}}},downloadEmbeddings:async t=>{e(e=>({downloading:{...e.downloading,[t]:!0}}));try{let e=await I.downloadEmbeddingsDownloadEmbeddingsEmbeddingTypeGet({embeddingType:t}),a=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download="".concat(t,"_embeddings.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}catch(e){throw Error("Failed to download ".concat(t," embeddings: ").concat(e.message))}finally{e(e=>({downloading:{...e.downloading,[t]:!1}}))}},resetEmbeddings:()=>{e({embeddings:{latent:{...O},interpretable:{...O}},embeddingsError:null}),t()._updateDerivedState()},fetchAppStatus:async()=>{e({isStatusLoading:!0,statusError:null});try{let a=await I.getAppStatusStatusGet();e({appStatus:a,lastStatusUpdate:new Date,statusError:null}),t()._updateDerivedState()}catch(a){e({statusError:a.message||"Failed to fetch app status"}),t()._updateDerivedState()}finally{e({isStatusLoading:!1})}},startStatusAutoRefresh:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;H(t().fetchAppStatus,e,"status")},stopStatusAutoRefresh:()=>{V("status")},getStepStatus:e=>{let a=t(),{currentStep:r,_derived:s}=a;return"upload"===e&&a.uploadError||"training"===e&&a.trainingError||"embeddings"===e&&a.embeddingsError||"status"===e&&a.statusError?"error":s.completedSteps.includes(e)?"completed":r===e&&s.availableSteps.includes(e)?"active":"pending"}}));window.addEventListener("beforeunload",()=>{Object.keys(B).forEach(V)});let K=(0,r.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),W=(0,r.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),X=(0,r.default)("file-type",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]),Y=(0,r.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),$=(0,r.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Q=(0,r.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Z=(0,r.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ee=(0,r.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),et=(0,r.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ea={idle:{text:"Ready to Train",icon:Z,description:"Configure and start training",styles:"border-gray-200 bg-gray-50",iconColor:"text-gray-600"},running:{text:"Training in Progress",icon:n.Activity,description:"Model is learning from your data",styles:"border-blue-200 bg-blue-50",iconColor:"text-blue-600 animate-pulse"},completed:{text:"Training Completed",icon:d,description:"Model training finished successfully",styles:"border-green-200 bg-green-50",iconColor:"text-green-600"},error:{text:"Training Failed",icon:p,description:"An error occurred during training",styles:"border-red-200 bg-red-50",iconColor:"text-red-600"}};var er=e.i(16715);let es=(0,r.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),en={loading:{icon:n.Activity,text:"Loading...",styles:"bg-blue-50 border-blue-200",iconColor:"text-blue-600 animate-pulse"},available:{icon:d,text:"Available",styles:"bg-green-50 border-green-200",iconColor:"text-green-600"},error:{icon:p,text:"Error",styles:"bg-red-50 border-red-200",iconColor:"text-red-600"},waiting:{icon:es,text:"Waiting for Training",styles:"bg-gray-50 border-gray-200",iconColor:"text-gray-600"},unavailable:{icon:K,text:"Not Available",styles:"bg-gray-50 border-gray-200",iconColor:"text-gray-600"}},ei=(0,r.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),el=(0,r.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),ed={error:{text:"Service Error",icon:p,styles:"bg-red-50 border-red-200 text-red-800",iconColor:"text-red-600"},loading:{text:"Checking Status...",icon:n.Activity,styles:"bg-gray-50 border-gray-200 text-gray-800",iconColor:"text-gray-600 animate-pulse"},healthy:{text:"Service Healthy",icon:d,styles:"bg-green-50 border-green-200 text-green-800",iconColor:"text-green-600"},partial:{text:"Service Partially Ready",icon:l,styles:"bg-blue-50 border-blue-200 text-blue-800",iconColor:"text-blue-600"},unknown:{text:"Service Status Unknown",icon:l,styles:"bg-yellow-50 border-yellow-200 text-yellow-800",iconColor:"text-yellow-600"}},eo={upload:{title:"Data Upload",description:"Upload your H5AD dataset",icon:s,component:e=>{let{onError:r,className:s=""}=e,n=J(e=>e.uploadedFile),i=J(e=>e.uploading),l=J(e=>e.uploadProgress),o=J(e=>e.uploadError),c=J(e=>e.uploadFile),u=J(e=>e.resetUpload),[m,h]=(0,a.useState)(!1),g=(0,a.useCallback)(async e=>{try{await c(e)}catch(e){null==r||r(e.message)}},[c,r]),x=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h("dragenter"===e.type||"dragover"===e.type)},[]),b=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),h(!1),(null==(t=e.dataTransfer.files)?void 0:t[0])&&g(e.dataTransfer.files[0])},[g]),y=(0,a.useCallback)(e=>{var t;(null==(t=e.target.files)?void 0:t[0])&&g(e.target.files[0])},[g]),f=i?l<100?"Uploading h5ad file...":"Processing...":"Ready to upload";return(0,t.jsxs)("div",{className:"space-y-6 ".concat(s),children:[(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(W,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-800",children:"H5AD Format Required"}),(0,t.jsx)("p",{className:"text-blue-700 mt-1",children:"Upload your single-cell data in H5AD format (AnnData) containing expression matrices and metadata."}),(0,t.jsx)("div",{className:"mt-2 text-sm text-blue-600 space-y-1",children:(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("strong",{children:"Max size:"})," 500 MB • ",(0,t.jsx)("strong",{children:"Extension:"})," .h5ad"]})})]})]})}),n&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(d,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-green-800",children:"H5AD File Uploaded Successfully"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:n.name})," (",(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(n.sizeInBytes),")"]})}),(0,t.jsx)("button",{onClick:u,className:"mt-3 text-sm text-green-600 underline hover:text-green-800 font-medium",children:"Upload different file"})]})]})}),i&&(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,t.jsx)(K,{className:"h-5 w-5 text-blue-600 animate-pulse"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-blue-800",children:"Uploading H5AD File"}),(0,t.jsx)("p",{className:"text-blue-700 text-sm",children:f})]})]}),(0,t.jsx)("div",{className:"w-full bg-blue-100 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300 ".concat((e=>0===e?"w-0":e<=10?"w-[10%]":e<=25?"w-1/4":e<=50?"w-1/2":e<=75?"w-3/4":e<100?"w-[90%]":"w-full")(l))})}),(0,t.jsx)("div",{className:"text-right text-sm text-blue-600 mt-2",children:(0,t.jsxs)("span",{children:[l,"%"]})})]}),o&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(p,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-red-800",children:"Upload Failed"}),(0,t.jsx)("p",{className:"text-red-700 mt-1",children:o}),(0,t.jsx)("button",{onClick:u,className:"mt-2 text-sm text-red-600 underline hover:text-red-800 font-medium",children:"Try again"})]})]})}),!n&&!i&&(0,t.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-12 text-center transition-all ".concat(m?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:b,children:[(0,t.jsx)("input",{type:"file",onChange:y,accept:".h5ad",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"upload h5ad file"}),(0,t.jsx)(K,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:m?"Drop your H5AD file here":"Upload your H5AD dataset"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Drag and drop an H5AD file here, or click to browse"}),(0,t.jsxs)("div",{className:"inline-flex items-center space-x-2 text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:[(0,t.jsx)(X,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"H5AD format • Max 500MB"})]})]})]})}},training:{title:"Model Training",description:"Train the autoencoder model",icon:n.Activity,component:e=>{let{onError:r,className:s=""}=e,n=J(e=>e.trainingState),i=J(e=>e.trainingConfig),l=J(e=>e.isStartingTraining),d=J(e=>e.trainingError),o=J(e=>e.startTraining),c=J(e=>e.stopTraining),u=J(e=>e.resetTraining),m=J(e=>e.updateTrainingConfig),h=J(e=>e._derived.isTrainingRunning),g=J(e=>e._derived.isTrainingComplete),[x,b]=(0,a.useState)(!1),y=d?"error":g?"completed":h?"running":"idle",f=ea[y],v=f.icon,w=async()=>{try{await o()}catch(e){null==r||r(e.message||"Failed to start training")}},j=async()=>{try{await c()}catch(e){null==r||r(e.message||"Failed to stop training")}},N=()=>{u(),b(!1)},S=(null==n?void 0:n.currentEpoch)&&(null==n?void 0:n.totalEpochs)?Math.round(n.currentEpoch/n.totalEpochs*100):0;return(0,t.jsxs)("div",{className:"space-y-6 ".concat(s),children:[(0,t.jsxs)("div",{className:"p-6 rounded-lg border ".concat(f.styles),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(v,{className:"h-6 w-6 ".concat(f.iconColor)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:f.text}),(0,t.jsx)("p",{className:"text-sm opacity-75",children:f.description}),n&&(0,t.jsxs)("p",{className:"text-sm opacity-75",children:["Epoch ",n.currentEpoch||0," / ",n.totalEpochs||0]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:["idle"===y&&(0,t.jsxs)("button",{onClick:w,disabled:l,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)(Y,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:l?"Starting...":"Start Training"})]}),"running"===y&&(0,t.jsxs)("button",{onClick:j,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[(0,t.jsx)($,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Stop"})]}),("error"===y||"completed"===y)&&(0,t.jsxs)("button",{onClick:N,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(Q,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Reset"})]})]})]}),"running"===y&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,t.jsx)("span",{children:"Training Progress"}),(0,t.jsxs)("span",{children:[S,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-white bg-opacity-50 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ".concat((e=>0===e?"w-0":e<=10?"w-[10%]":e<=25?"w-1/4":e<=50?"w-1/2":e<=75?"w-3/4":e<100?"w-[90%]":"w-full")(S))})})]}),"completed"===y&&(null==n?void 0:n.completedAt)&&(0,t.jsx)("div",{className:"pt-4 border-t border-white border-opacity-50",children:(0,t.jsx)("div",{className:"text-center text-sm text-green-700",children:(0,t.jsxs)("p",{children:["Completed at: ",new Date(n.completedAt).toLocaleString()]})})})]}),"idle"===y&&(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,t.jsxs)("button",{onClick:()=>b(!x),className:"flex items-center justify-between w-full text-left hover:text-blue-600 transition-colors",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Training Configuration"}),x?(0,t.jsx)(et,{className:"h-5 w-5"}):(0,t.jsx)(ee,{className:"h-5 w-5"})]}),x&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"epochs",className:"block text-sm font-medium text-gray-700 mb-1",children:"Epochs"}),(0,t.jsx)("input",{id:"epochs",type:"number",min:"1",max:"1000",value:i.epochs,onChange:e=>m({epochs:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"learningRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Learning Rate"}),(0,t.jsx)("input",{id:"learningRate",type:"number",step:"0.001",min:"0.0001",max:"1",value:i.learningRate,onChange:e=>m({learningRate:parseFloat(e.target.value)||.001}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"batchSize",className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch Size"}),(0,t.jsxs)("select",{id:"batchSize",value:i.batchSize,onChange:e=>m({batchSize:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:16,children:"16"}),(0,t.jsx)("option",{value:32,children:"32"}),(0,t.jsx)("option",{value:64,children:"64"}),(0,t.jsx)("option",{value:128,children:"128"}),(0,t.jsx)("option",{value:256,children:"256"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"latentDim",className:"block text-sm font-medium text-gray-700 mb-1",children:"Latent Dimensions"}),(0,t.jsx)("input",{id:"latentDim",type:"number",min:"2",max:"128",value:i.latentDim,onChange:e=>m({latentDim:parseInt(e.target.value)||10}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"hiddenDim",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hidden Dimensions"}),(0,t.jsx)("input",{id:"hiddenDim",type:"number",min:"32",max:"1024",value:i.hiddenDim,onChange:e=>m({hiddenDim:parseInt(e.target.value)||128}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),"error"===y&&d&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(p,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-red-800",children:"Training Failed"}),(0,t.jsx)("p",{className:"text-red-700 mt-1",children:d}),(0,t.jsx)("button",{onClick:N,className:"mt-2 text-sm text-red-600 underline hover:text-red-800 font-medium",children:"Reset and try again"})]})]})})]})}},embeddings:{title:"Embeddings",description:"Access generated embeddings",icon:i,component:e=>{let{onError:r,className:s=""}=e,n=J(e=>e.embeddings),l=J(e=>e.downloading),d=J(e=>e.embeddingsError),o=J(e=>e.fetchAllEmbeddings),c=J(e=>e.downloadEmbeddings),u=J(e=>e._derived.isTrainingComplete),m=J(e=>e._derived.hasAnyEmbeddings),h=n.latent.loading||n.interpretable.loading;l.latent||l.interpretable,(0,a.useEffect)(()=>{u&&o()},[u,o]);let g=async e=>{try{await c(e)}catch(t){null==r||r(t.message||"Failed to download ".concat(e," embeddings"))}};return(0,t.jsxs)("div",{className:"space-y-6 ".concat(s),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Embeddings Management"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:u?"Access and download generated embeddings":"Complete training to access embeddings"})]}),u&&(0,t.jsxs)("button",{onClick:o,disabled:h,className:"flex items-center space-x-2 px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)(er.RefreshCw,{className:"h-4 w-4 ".concat(h?"animate-spin":"")}),(0,t.jsx)("span",{children:h?"Refreshing...":"Refresh"})]})]}),!u&&(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(es,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-amber-800",children:"Training Required"}),(0,t.jsx)("p",{className:"text-amber-700 mt-1",children:"Embeddings will be available after model training is completed."})]})]})}),(0,t.jsx)("div",{className:"grid gap-4",children:["latent","interpretable"].map(e=>{let a=en[(e=>{if(!u)return"waiting";let t=n[e];return t.loading?"loading":t.error?"error":t.available?"available":"unavailable"})(e)],r=a.icon;return(0,t.jsx)("div",{className:"border rounded-lg ".concat(a.styles),children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(r,{className:"h-6 w-6 ".concat(a.iconColor)}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold capitalize",children:[e," Embeddings"]}),(0,t.jsxs)("p",{className:"text-sm opacity-75",children:["Status: ",a.text]})]})]}),n[e].available&&(0,t.jsxs)("button",{onClick:()=>g(e),disabled:l[e],className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)(i,{className:"h-4 w-4 ".concat(l[e]?"animate-bounce":"")}),(0,t.jsx)("span",{children:l[e]?"Downloading...":"Download CSV"})]})]}),n[e].error&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-300 rounded p-3 mt-3",children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:n[e].error})})]})},e)})}),d&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(p,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-red-800",children:"Error Loading Embeddings"}),(0,t.jsx)("p",{className:"text-red-700 mt-1",children:d}),(0,t.jsx)("button",{onClick:o,className:"mt-2 text-sm text-red-600 underline hover:text-red-800 font-medium",children:"Try again"})]})]})}),u&&!m&&!h&&!d&&(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,t.jsx)(K,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Embeddings Available"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Training completed but no embeddings were generated."}),(0,t.jsx)("button",{onClick:o,className:"text-sm text-blue-600 underline hover:text-blue-800 font-medium",children:"Check again"})]})]})}},status:{title:"System Status",description:"Application health monitoring",icon:l,component:e=>{let{autoRefresh:r=!0,refreshInterval:s=3e4,className:n=""}=e,i=J(e=>e.appStatus),l=J(e=>e.isStatusLoading),d=J(e=>e.statusError),o=J(e=>e.lastStatusUpdate),c=J(e=>e.fetchAppStatus),u=J(e=>e.startStatusAutoRefresh),m=J(e=>e.stopStatusAutoRefresh),[h,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>(c(),r&&u(s),()=>m()),[r,s,c,u,m]);let x=(()=>{if(d)return ed.error;if(l&&!i)return ed.loading;if(i&&"boolean"==typeof i.data_loaded){if(i.data_loaded&&i.model_trained)return ed.healthy;if(i.data_loaded&&!i.model_trained)return ed.partial}return ed.unknown})(),b=x.icon;return(0,t.jsxs)("div",{className:"space-y-4 ".concat(n),children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg border ".concat(x.styles),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(b,{className:"h-6 w-6 ".concat(x.iconColor)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:x.text}),(0,t.jsx)("p",{className:"text-sm opacity-75",children:i?(()=>{if(!i)return"No status data";let e=[];return i.data_loaded&&e.push("Data Ready"),i.model_trained&&e.push("Model Ready"),i.training_running&&e.push("Training Active"),e.length>0?e.join(" • "):"Initializing"})():"No data"}),(0,t.jsxs)("p",{className:"text-xs opacity-60 mt-1",children:["Last updated: ",(e=>{if(!e)return"Never";let t=Math.floor((Date.now()-e.getTime())/6e4);return t<1?"Just now":t<60?"".concat(t,"m ago"):e.toLocaleDateString()})(o)]})]})]}),(0,t.jsx)("button",{onClick:c,disabled:l,className:"p-2 rounded-md border transition-colors ".concat(l?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-600 hover:text-gray-800 hover:bg-gray-50"),title:"Refresh Status",children:(0,t.jsx)(er.RefreshCw,{className:"h-4 w-4 ".concat(l?"animate-spin":"")})})]}),i&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-white border-opacity-50",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-1",children:(0,t.jsx)(K,{className:"h-4 w-4 ".concat(i.data_loaded?"text-green-600":"text-gray-400")})}),(0,t.jsx)("p",{className:"text-xs opacity-75",children:"Data"}),(0,t.jsx)("p",{className:"font-semibold text-sm",children:i.data_loaded?"Loaded":"Not Loaded"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-1",children:(0,t.jsx)(Z,{className:"h-4 w-4 ".concat(i.model_trained?"text-green-600":"text-gray-400")})}),(0,t.jsx)("p",{className:"text-xs opacity-75",children:"Model"}),(0,t.jsx)("p",{className:"font-semibold text-sm",children:i.model_trained?"Ready":"Not Trained"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-1",children:i.training_running?(0,t.jsx)(Y,{className:"h-4 w-4 text-blue-600 animate-pulse"}):(0,t.jsx)(el,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("p",{className:"text-xs opacity-75",children:"Training"}),(0,t.jsx)("p",{className:"font-semibold text-sm",children:i.training_running?"Running":"Idle"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center mb-1",children:(0,t.jsx)(ei,{className:"h-4 w-4 text-purple-600"})}),(0,t.jsx)("p",{className:"text-xs opacity-75",children:"Device"}),(0,t.jsx)("p",{className:"font-semibold text-sm uppercase",children:i.device})]})]})]}),d&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(p,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-red-800",children:"Status Check Failed"}),(0,t.jsx)("p",{className:"text-red-700 mt-1",children:d}),(0,t.jsx)("button",{onClick:c,className:"mt-2 text-sm text-red-600 underline hover:text-red-800 font-medium",children:"Try again"})]})]})}),i&&(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,t.jsxs)("button",{onClick:()=>g(!h),className:"flex items-center justify-between w-full text-left hover:text-blue-600 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Z,{className:"h-4 w-4 text-gray-600"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Detailed Information"})]}),h?(0,t.jsx)(et,{className:"h-4 w-4 text-gray-600"}):(0,t.jsx)(ee,{className:"h-4 w-4 text-gray-600"})]}),h&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,t.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[(0,t.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"System Status Details"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Data Loaded:"}),(0,t.jsx)("span",{className:"font-medium ".concat(i.data_loaded?"text-green-600":"text-red-600"),children:i.data_loaded?"✅ Yes":"❌ No"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Model Trained:"}),(0,t.jsx)("span",{className:"font-medium ".concat(i.model_trained?"text-green-600":"text-yellow-600"),children:i.model_trained?"✅ Yes":"⏳ No"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Training Status:"}),(0,t.jsx)("span",{className:"font-medium ".concat(i.training_running?"text-blue-600":"text-gray-600"),children:i.training_running?"🔄 Running":"⏸️ Idle"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Compute Device:"}),(0,t.jsx)("span",{className:"font-medium text-purple-600 uppercase",children:i.device})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{className:"text-sm text-gray-600 cursor-pointer hover:text-gray-800",children:"Raw Status Response"}),(0,t.jsx)("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap overflow-auto max-h-32 mt-2 bg-white p-2 rounded border",children:JSON.stringify(i,null,2)})]})})]})})]}),r&&(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Auto-refreshing every ",Math.floor(s/1e3),"s"]})})]})}}},ec=["upload","training","embeddings","status"],eu={completed:{icon:d,color:"text-green-600",bg:"bg-green-50 border-green-200",clickable:!0},active:{icon:o,color:"text-blue-600",bg:"bg-blue-50 border-blue-200",clickable:!0},pending:{icon:o,color:"text-gray-700 hover:text-blue-600",bg:"bg-white border-gray-200 hover:bg-gray-50",clickable:!0},error:{icon:p,color:"text-red-600",bg:"bg-red-50 border-red-200",clickable:!0}},em=e=>{let{className:r=""}=e,[s,l]=(0,a.useState)(!1),o=J(e=>e.currentStep),p=J(e=>e.navigateToStep),x=J(e=>e.navigateToNext),b=J(e=>e.getStepStatus),y=J(e=>e._derived.progressPercentage);J(e=>e._derived.completedSteps);let f=J(e=>e._derived.availableSteps),v=J(e=>e._derived.isTrainingRunning),w=J(e=>e._derived.isTrainingComplete),j=J(e=>e._derived.hasAnyEmbeddings),N=J(e=>!!e.uploadedFile),S=J(e=>{let{trainingState:t}=e;return(null==t?void 0:t.currentEpoch)&&(null==t?void 0:t.totalEpochs)?Math.round(t.currentEpoch/t.totalEpochs*100):0}),_=a.default.useCallback(e=>{var t;let a=eu[b(e)],r=eo[e];return{...a,icon:null!=(t=a.icon)?t:r.icon}},[b]),k=ec.indexOf(o),T=k<ec.length-1&&f.includes(ec[k+1]),E=k>0,C=a.default.useCallback(()=>{let e=eo[o],a=e.component;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"border-b pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)(e.icon,{className:"h-6 w-6 text-blue-600"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e.title})]}),(0,t.jsx)("p",{className:"text-gray-600",children:e.description})]}),(0,t.jsx)(a,{onError:t=>console.error("[".concat(e.title," Error]:"),t)}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t",children:[(0,t.jsxs)("button",{onClick:()=>p(ec[k-1]),disabled:!E,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)(u,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Previous"})]}),(0,t.jsxs)("button",{onClick:x,disabled:!T,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)("span",{children:"Next"}),(0,t.jsx)(c,{className:"h-4 w-4"})]})]})]})},[o,p,x,T,E,k]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 ".concat(r),children:[s&&(0,t.jsx)("div",{className:"fixed inset-0 z-40 lg:hidden bg-gray-600 bg-opacity-75",onClick:()=>l(!1)}),(0,t.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform ".concat(s?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0"),children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(g.Home,{className:"h-6 w-6 text-blue-600"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"MCCVAE App"})]}),(0,t.jsx)("button",{onClick:()=>l(!1),className:"lg:hidden p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"Close sidebar",children:(0,t.jsx)(h,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[y,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ".concat((e=>0===e?"w-0":e<=25?"w-1/4":e<=50?"w-1/2":e<=75?"w-3/4":e<100?"w-[95%]":"w-full")(y))})}),j&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-green-600 text-sm mt-3",children:[(0,t.jsx)(d,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Workflow Complete!"})]})]}),(0,t.jsx)("div",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:ec.map(e=>{let a=eo[e],r=_(e),s=r.icon,n=b(e);return(0,t.jsxs)("button",{onClick:()=>r.clickable&&p(e),disabled:!r.clickable,className:"w-full flex items-center space-x-3 p-3 rounded-lg border transition-all ".concat(r.bg," ").concat(r.clickable?"cursor-pointer":"cursor-not-allowed"),children:[(0,t.jsx)(s,{className:"h-5 w-5 ".concat(r.color," flex-shrink-0")}),(0,t.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium ".concat(r.color," truncate"),children:a.title}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:a.description})]}),"active"===n&&(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"})]},e)})}),(0,t.jsxs)("div",{className:"p-4 border-t text-xs text-gray-500 space-y-2",children:[N&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d,{className:"h-3 w-3 text-green-600"}),(0,t.jsx)("span",{children:"Dataset uploaded"})]}),v&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,t.jsx)(n.Activity,{className:"h-3 w-3 animate-pulse"}),(0,t.jsxs)("span",{children:["Training: ",S,"%"]})]}),w&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d,{className:"h-3 w-3 text-green-600"}),(0,t.jsx)("span",{children:"Training completed"})]}),j&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(i,{className:"h-3 w-3 text-green-600"}),(0,t.jsx)("span",{children:"Embeddings ready"})]})]})]})}),(0,t.jsxs)("div",{className:"lg:pl-64",children:[(0,t.jsxs)("div",{className:"lg:hidden flex items-center justify-between p-4 bg-white border-b sticky top-0 z-30",children:[(0,t.jsx)("button",{onClick:()=>l(!0),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"Open sidebar",children:(0,t.jsx)(m,{className:"h-6 w-6"})}),(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:eo[o].title}),(0,t.jsx)("div",{className:"w-10"})]}),(0,t.jsx)("main",{className:"p-6",children:C()})]})]})};function eh(){return(0,t.jsx)(em,{})}}]);